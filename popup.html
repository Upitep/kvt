<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<title>Kvalood TI helper</title>
	<link rel="stylesheet" href="/css/popup.css">
</head>
<body>
	<div class="nav-tabs">
		<a href="#reports" data-tab="reports" class="b-nav-tab active">
			Отчеты
		</a>
		<a href="#prints" data-tab="prints" class="b-nav-tab">
			Принты
		</a>
		<a href="#tickers" data-tab="tickers" class="b-nav-tab">
			Тикеры
		</a>
		<a href="#settings" data-tab="settings" class="b-nav-tab">
			Настройки
		</a>
	</div>
	
	<div class="content-tabs">
		<!-- отчеты -->
		<div id="reports" class="b-tab active">
			<div class="form-inline row g-2">
				<div class="form-group col-4">
					<input type="datetime-local" id="fromDate" class="form-control">
				</div>
				<div class="form-group col-4">
					<input type="datetime-local" id="toDate" class="form-control">
				</div>				
				<div class="form-group col-2">
					<select id="statsFor" class="form-control" style="width: 70px;" title="Выберите счёт по которому хотите загрузить статистику">
					</select>
				</div>
				<div class="col-2">
					<button id="kvShowReport" class="btn">Загрузить</button>
				</div>
			</div>
			
			<div class="date-sub-panel">
				<button class="btn btn-sm btn-secondary" data-set-time="from_morning">с утра</button>
				<button class="btn btn-sm btn-secondary" data-set-time="from_week">c начала недели</button>
				<button class="btn btn-sm btn-secondary" data-set-time="from_mount">с начала месяца</button>				
			</div>
			
			<div id="reportWindow"></div>
		</div>
		
		<!-- принты -->
		<div id="prints" class="b-tab">		
			<p class="mt-0 mb-2">Истории сделок (t&s) акциям за N торговый день.</p>	
			<div class="form-inline row g-2">
				<div class="form-group col-2">
					<input type="text" id="printTicker" class="form-control" placeholder="VEON-RX">
				</div>
				<div class="form-group col-3">
					<input type="date" id="printDate" class="form-control">
				</div>
				<div class="form-group col-2">
					<input type="number" id="printMinQty" class="form-control" min="1" value="10" title="Минимальный объём для отображения">
				</div>
				<div class="form-group col-5" style="gap: 7px;">
					<button id="kvtLoadPrintsTicker" class="btn">Загрузить</button>
					<button id="kvtDownloadPrintsTicker" class="btn" value="1">Скачать *.csv</button>
				</div>
			</div>
			
			<div id="printsWindow" class="mt-2 mb-1"></div>

			<div class="note">* исторические данные не полные. Акции SPBX и MOEX.</div>
		</div>
		
		<!-- тикеры -->
		<div id="tickers" class="b-tab">
			<div class="form-group">
				<button id="kvLoadGroupsTicker" class="btn">Загрузить группы и тикеры</button>
				<!-- <button id="kvDownloadGroupsTicker" class="btn">Экспорт в *.json</button> -->
			</div>
			
			<div id="tickersWindow" class="d-none">
				<div class="form-group">
					<select id="tickersGroups" class="form-control">
						<option value="">--выберете группу--</option>
					</select>
				</div>
				<div class="form-group">
					<label for="groupTickersList" class="form-label">Список тикеров через пробел</label>
					<textarea id="groupTickersList" class="form-control"></textarea>
				</div>
				<div class="form-group">
					<button id="saveGroupTickers" class="btn">Сохранить</button>
				</div>
			</div>
		</div>
		
		<!-- настройки -->
		<div id="settings" class="b-tab">
			<div class="form-group row g-2">
				<div class="col-6">
					<div class="form-check">
						<input type="checkbox" name="compactStyle" id="compactStyle" class="form-check-input">
						<label for="compactStyle">Компактные стили терминала</label>
					</div>
					<div class="form-text">Больше свободного места на экране.</div>
				</div>
				<div class="col-6">
					<label for="styleTS" class="form-label">Стили ленты принтов (t&s)</label>

					<select id="styleTS" class="form-control" title="Стили ленты принтов (t&s)">
						<option value="" selected>Стандартные (тусклые цвета)</option>
						<option value="mid_brig">Средняя яркость</option>
						<option value="max_brig">Якрие (цвета как в стакане)</option>
					</select>
				</div>
			</div>
			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" name="showNullOperation" id="showNullOperation" class="form-check-input">
					<label for="showNullOperation">Показать тикеры с нулевым фин.результатом в отчетах</label>
				</div>
				<div class="form-text">Отображать бумаги с нулевым фин.результатом (выставили заявку - убрали)</div>
			</div>

			<hr/>
			
			<h3 class="mb-2">⚠️ Подключение к kvts. Регистрация в t.me/kvtsbot</h3>

			<p class="mt-1 mb-2">Для получения ленты принтов (T&S) и других данных</p>

			<div class="form-group row g-2">
				<div class="col-5">
					<label for="telegramId" class="form-label">Телеграм ID</label>
					<input type="text" name="telegramId" id="telegramId" class="form-control" placeholder="123456789">
				</div>
				<div class="col-7">
					<label for="kvtToken" class="form-label">Токен для подключения к kvts</label>
					<input type="text" name="kvtToken" id="kvtToken" class="form-control" placeholder="">
				</div>
			</div>

			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" name="hideShortsBrokers" id="hideShortsBrokers" class="form-check-input">
					<label for="hideShortsBrokers">Скрыть инфу, у каких брокеров есть бумага в шорт, в окне ввода заявки.</label>
				</div>
			</div>

			<hr/>

			<div class="form-group">
				<label for="kvtQuotes" class="form-label">Котировки индексов</label>

				<select id="kvtQuotes" class="form-control" style="width: 400px;" multiple>
					<option value="US500">US500 - (SPX) S&P 500</option>
					<option value="US100">US100 - (NDX) US tech 100</option>
					<option value="RTY">RTY - (Russel) US Russel 2000</option>
					<option value="US30">US30 - (DJI) Dow Jones Industrial Average</option>
					<option value="HK50">HK50 - (HK50) Hong Kong 50</option>
					<option value="DE40">DE40 - (DAX) Germany 40</option>

					<option value="BTCUSD">BTCUSD - (BTCUSD) Bitcoin/USD</option>

					<option value="OIL_BRENT">OIL_BRENT - (BRNT) Brent Oil / Нефть Brent</option>
					<option value="OIL_CRUDE">OIL_CRUDE - (WTI) Oil Crude / Сланцевая нефть</option>
					<option value="NATURALGAS">NATURALGAS - (NG) Natural gas / Природный газ</option>

					<option value="GOLD">GOLD - (GOLD) Gold / Золото</option>
					<option value="SILVER">SILVER - (SILVER) Silver / Серебро</option> 
					<option value="ALUMINUM">ALUMINUM - (Al) Aluminum Spot / Алюминий</option>   
					<option value="COPPER">COPPER - (COPPER) Copper / Медь</option>

					<option value="VIX">VIX - (VIX) Volatility Index / Индекс страха</option>
					
					<option value="DXY">DXY - (DXY) US Dollar Index / Индекс доллара</option>
				</select>

				<div class="form-text"><b><i>системное_имя - описание</i></b>. Обновляются раз в секунду. Зажать ctrl + выбрать нужные</div>

			</div>

			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" id="compactQuotes" class="form-check-input">
					<label for="compactQuotes">Компактное отображение индексов</label>
				</div>
				<div class="form-text">Отображение только название котировки и процент. При наведении, покажется цена</div>
			</div>

			<div class="form-group">				
				<label for="customNameQuotes">Кастомное название индексов</label>
				<textarea id="customNameQuotes" class="form-control">US500:SPX,US100:NDX,RTY:RTY,US30:DJI,HK50:HK50,DE40:DAX,OIL_BRENT:BRENT,OIL_CRUDE:WTI,NATURALGAS:NG,ALUMINUM:AL</textarea>
				<div class="form-text">Формат <i><b>системное_имя:ваше сокращение,системное_имя:ваше сокращение</i></div>
			</div>
			
			<hr/>
			
			<div class="form-group">
				<label for="kvtFastVolumePrice" class="form-label">Кнопки быстрого объема в деньгах ($/₽)</label>
				<input type="text" name="kvtFastVolumePrice" id="kvtFastVolumePrice" class="form-control" placeholder="100000,50000,25000,10000,5000">
				<div class="form-text">Быстрое заполнение объема в деньгах, в виджете заявки. <b>Указывать через запятую</b>, например "100000,50000"</div>
			</div>
			
			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" name="kvtFastVolumePriceRound" id="kvtFastVolumePriceRound" class="form-check-input">
					<label for="kvtFastVolumePriceRound">Округлять до 100 кнопки быстрого объема в $</label>
				</div>
				<div class="form-text">Округление кол-ва бумаг до 100. <i>Прим. - не 547, а 500</i></div>
			</div>
			
			<hr/>
			
			<div class="form-group">
				<label for="kvtFastVolumeSize" class="form-label">Кнопки быстрого объема в ШТ</label>
				<input type="text" name="kvtFastVolumeSize" id="kvtFastVolumeSize" class="form-control" placeholder="1000,500,100">
				<div class="form-text">Быстрое заполнение объема в шт, в виджете заявки. <b>Указывать через запятую</b>, например "1000,500,100"</div>
			</div>
			
			<hr/>

			<h3>💰 Фин. рез. Алор</h3>

			<div class="form-group row g-2">				
				<div class="col-7">
					<label for="alorToken" class="form-label">Алор токен</label>
					<input type="text" name="alorToken" id="alorToken" class="form-control">
					<div class="form-text">см. тут - <b>https://alor.dev/open-api-tokens</b></div>
				</div>
				<div class="col-5">
					<label for="alorPortfolio" class="form-label">Портфель фондового рынка</label>
					<input type="text" name="alorPortfolio" id="alorPortfolio" class="form-control" placeholder="DXXXXX">
					<div class="form-text">для выгрузки истории сделок</div>
				</div>
			</div>
			
			<hr/>
			
			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" name="rcktMonConnect" id="rcktMonConnect" class="form-check-input">
					<label for="rcktMonConnect">Переключать тикеры из RcktMon</label>
				</div>
				<div class="form-text">В программе RcktMon, при нажатии на кругляшки с переходом к тикеру по группе, открывать тикер в нужной группе. Доступны группы - 3 6 8 10 14</div>
			</div>
			
			<hr/>
			
			<h3>Быстрый объем в деньгах при переходе к группе:</h3>
			
			<div class="form-group row g-2">
				<div class="col-6">
					<label for="kvtSTIGFastVolSumBot" class="form-label">из ботов</label>
					<input type="text" name="kvtSTIGFastVolSumBot" id="kvtSTIGFastVolSumBot" class="form-control" placeholder="100000">
				</div>
				<div class="col-6">
					<label for="kvtSTIGFastVolSumRcktMon" class="form-label">из RcktMon</label>
					<input type="text" name="kvtSTIGFastVolSumRcktMon" id="kvtSTIGFastVolSumRcktMon" class="form-control" placeholder="500000">
				</div>
				<div class="col-12">
					<label for="kvtFastSumRelation" class="form-label">Подстановка заранее указанного объёма для конкретных тикеров при переходе к тикеру из RcktMon, telegram ботов или кнопкок "STIG" в терминале</label>
					<textarea id="kvtFastSumRelation" class="form-control" placeholder="BABA:15000,TCSG:100000,MOEX:25000"></textarea>
					<div class="form-text">Формат: <i><b>ТИКЕР:сумма_в_деньгах,ТИКЕР:сумма_в_деньгах</div>
				</div>
			</div>

			<hr/>

			<div class="form-group">
				<div class="form-check">
					<input type="checkbox" name="debug" id="debug" class="form-check-input">
					<label for="debug">debug расширения (в консоли)</label>
				</div>
			</div>

		</div>
	</div>
</body>

<script src="/libs/tablesort/tablesort.js"></script>
<script src="/libs/tablesort/tablesort.number.js"></script>
<script src="/libs/tabs.js"></script>

<script src="/js/helpers.js"></script>
<script src="/js/alor.js"></script>
<script src="/js/popup.js"></script>

</html>